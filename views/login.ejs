<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/login.css">
</head>
<body>
    <div class="login-container">
        <div class="login-background">
            <div class="login-card">
                <div class="login-header">
                    <div class="login-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V18C3 19.1 3.9 20 5 20H11C11.8 21.2 13.3 22 15 22C18.3 22 21 19.3 21 16C21 13.4 19.4 11.1 17 10.3V9H21ZM15 12C17.2 12 19 13.8 19 16S17.2 20 15 20 11 18.2 11 16 12.8 12 15 12Z" fill="currentColor"/>
                        </svg>
                    </div>
                    <h1><%= title %></h1>
                    <p>กรุณาเข้าสู่ระบบเพื่อดำเนินการต่อ</p>
                </div>

                <% if (typeof error !== 'undefined' && error) { %>
                    <div class="alert alert-error">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
                        </svg>
                        <%= error %>
                    </div>
                <% } %>

                <% if (typeof success !== 'undefined' && success) { %>
                    <div class="alert alert-success">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" fill="currentColor"/>
                        </svg>
                        <%= success %>
                    </div>
                <% } %>

                <form class="login-form" action="/login" method="POST" id="loginForm">
                    <div class="form-group">
                        <label for="username">ชื่อผู้ใช้</label>
                        <div class="input-group">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
                            </svg>
                            <input 
                                type="text" 
                                id="username" 
                                name="username" 
                                placeholder="กรอกชื่อผู้ใช้"
                                value="<%= typeof username !== 'undefined' ? username : '' %>"
                                required
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password">รหัสผ่าน</label>
                        <div class="input-group">
                            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 8H17V6C17 3.24 14.76 1 12 1S7 3.24 7 6V8H6C4.9 8 4 8.9 4 10V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V10C20 8.9 19.1 8 18 8ZM9 6C9 4.34 10.34 3 12 3S15 4.34 15 6V8H9V6ZM18 20H6V10H18V20ZM12 17C13.1 17 14 16.1 14 15S13.1 13 12 13 10 13.9 10 15 10.9 17 12 17Z" fill="currentColor"/>
                            </svg>
                            <input 
                                type="password" 
                                id="password" 
                                name="password" 
                                placeholder="กรอกรหัสผ่าน"
                                required
                            >
                            <button type="button" class="password-toggle" onclick="togglePassword()">
                                <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 4.5C7.5 4.5 3.73 7.61 3 12C3.73 16.39 7.5 19.5 12 19.5S20.27 16.39 21 12C20.27 7.61 16.5 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12S9.24 7 12 7 17 9.24 17 12 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12S10.34 15 12 15 15 13.66 15 12 13.66 9 12 9Z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" name="remember" id="remember">
                            <span class="checkmark"></span>
                            จดจำการเข้าสู่ระบบ
                        </label>
                        <a href="/forgot-password" class="forgot-link">ลืมรหัสผ่าน?</a>
                    </div>

                    <button type="submit" class="login-btn" id="loginBtn">
                        <span class="btn-text">เข้าสู่ระบบ</span>
                        <div class="btn-loading" style="display: none;">
                            <div class="spinner"></div>
                            กำลังเข้าสู่ระบบ...
                        </div>
                    </button>
                </form>

                <div class="login-footer">
                    <p>ยังไม่มีบัญชี? <a href="/register">สมัครสมาชิก</a></p>
                    <div class="divider">
                        <span>หรือ</span>
                    </div>
                    <a href="/" class="back-home-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
                        </svg>
                        กลับหน้าแรก
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/login.js"></script>
</body>
</html>